{% extends 'layout.html' %}
{% load static %}

{% block css %}
<link rel="stylesheet" href="{% static 'css/reset.css' %}">
{% endblock %}

{% block content %}

<div class="reset-container">
    <div class="reset-box">

        <h2 class="reset-title">Reset Password</h2>

        <div class="alert alert-warning">
            <strong>Important:</strong> Resetting your password will 
            <strong>permanently delete all your encrypted files</strong> 
            because they cannot be decrypted without your old password.
        </div>

        {% if form.errors %}
        <div class="alert alert-danger">
            {% for field, errors in form.errors.items %}
                {% for error in errors %}
                    <p>{{ error }}</p>
                {% endfor %}
            {% endfor %}
        </div>
        {% endif %}

        <!-- Reset Password Form -->
        <form method="post" onsubmit="return confirmDelete();">
            {% csrf_token %}

            <label><strong>New Password</strong></label>
            <input type="password" name="password1" class="form-control mb-3" placeholder="Enter new password" required>

            <label><strong>Confirm Password</strong></label>
            <input type="password" name="password2" class="form-control mb-3" placeholder="Confirm new password" required>

            <button class="btn btn-secondary btn-reset">Reset Password</button>
        </form>

        <p class="reset-footer">
            <a href="{% url 'login' %}" class="text-dark">Back to Login</a>
        </p>

    </div>
</div>

<script>
function confirmDelete() {
    return confirm(
        "Warning: Resetting your password will permanently delete all encrypted files. Are you sure you want to continue?"
    );
}
</script>

{% endblock %}
